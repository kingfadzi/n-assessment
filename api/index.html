<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
    <title>ECharts Process Tree Example</title>
    <script src="js/echarts.min.js"></script> <!-- Ensure this path is correct -->
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            min-height: 100%;
            overflow-x: hidden; /* Prevent horizontal scrolling */
            overflow-y: auto; /* Allow vertical scrolling if content overflows */
        }

        #main {
            width: 100%;
            min-height: 600px; /* Set a minimum height */
            height: auto; /* Allow the height to expand automatically based on content */
            border: 1px solid #ccc; /* Optional: add a border for better visibility */
            box-sizing: border-box; /* Ensure padding and border are included in the height */
        }
    </style>
</head>
<body>
<div id="main"></div>
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        fetch('data/data.json') // Path to your local JSON file
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log("Data loaded successfully:", data);

                var chart = echarts.init(document.getElementById('main'));

                var option = {
                    tooltip: {
                        trigger: 'item',
                        triggerOn: 'mousemove',
                        formatter: function(params) {
                            return `${params.data.name}<br/>Type: ${params.data.type}<br/>Description: ${params.data.description}`;
                        }
                    },
                    series: [
                        {
                            type: 'tree',
                            data: data,  // Use the data fetched from the JSON file
                            top: '1%',
                            left: '7%',
                            bottom: '1%',
                            right: '20%',
                            symbolSize: 15, // Increase symbol size for better visibility
                            label: {
                                position: 'left',
                                verticalAlign: 'middle',
                                align: 'right',
                                fontSize: 14,
                                distance: 20, // Add more space between labels and nodes
                            },
                            leaves: {
                                label: {
                                    position: 'right',
                                    verticalAlign: 'middle',
                                    align: 'left',
                                    distance: 20, // Add more space between labels and nodes
                                }
                            },
                            expandAndCollapse: true,
                            initialTreeDepth: 2,  // Adjust this value to your preference
                            animationDuration: 550,
                            animationDurationUpdate: 750,
                            roam: true,  // Enable panning and zooming
                            layout: 'orthogonal',  // Layout for better scrolling experience
                            lineStyle: {
                                width: 2,
                                curveness: 0.5,  // Adds curve to the lines for better spacing
                            },
                            itemStyle: {
                                borderColor: '#ccc',  // Makes the connecting lines more visible
                                borderWidth: 2,
                            },
                            nodePadding: 20,  // Adds padding between nodes (horizontal spacing)
                            layerPadding: 120, // Increase spacing between layers (vertical spacing)
                            edgeShape: 'polyline',  // This ensures better spacing and visibility
                        }
                    ]
                };

                chart.setOption(option);
                chart.resize();
            })
            .catch(error => {
                console.error('Error loading the JSON data:', error);
            });
    });
</script>
</body>
</html>
